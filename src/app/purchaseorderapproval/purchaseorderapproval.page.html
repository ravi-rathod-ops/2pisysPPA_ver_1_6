<ion-header>
  <div class="inner-header-wrap">
    <div class="left-menu">
      <ion-toolbar>
        <ion-buttons si slot="start">
          <ion-back-button defaultHref="approvals"></ion-back-button>
        </ion-buttons>
        <h3 class="main-sub-heading">Purchase Order</h3>
      </ion-toolbar>
      <div class="planid-wrapper">
        <ion-input
          (keyup)="applyFilter($event.target.value)"
          placeholder="Search"
          [(ngModel)]="searchData"
          class="search-box"
          ><ion-icon name="search" slot="end"></ion-icon
        ></ion-input>
      </div>
    </div>
  </div>
</ion-header>

<ion-content>
  <div class="reports-table">
    <ion-grid>
      <!-- Table Header -->
      <ion-row class="table-header" nowrap>
        <ion-col size="1" class="header-cell" (click)="sort('purid', false)">
          PO Id ({{ rmArray?.length || 0 }})
        </ion-col>
        <ion-col size="2" class="header-cell" (click)="sort('purdate', false)">
          PO Date
        </ion-col>
        <ion-col size="2" class="header-cell" (click)="sort('supname', false)">
          Sup Name
        </ion-col>
        <ion-col size="4" class="header-cell" (click)="sort('ramname', false)">
          RM Name (Grade)
        </ion-col>
        <ion-col size="1" class="header-cell" (click)="sort('qty', false)">
          PO Qty
        </ion-col>
        <ion-col size="1" class="header-cell" (click)="sort('rate', false)">
          PO Rate
        </ion-col>
        <ion-col
          size="1"
          class="header-cell"
          (click)="sort('purgrandtotal', false)"
        >
          Grand Total
        </ion-col>
      </ion-row>

      <!-- Table Body -->
      <div class="table-body">
        <ion-row
          class="table-row"
          nowrap
          *ngFor="let x of rmArray; index as i"
          (click)="itemDetail(x)"
        >
          <ion-col size="1" class="cell">{{ x.purid }}</ion-col>
          <ion-col size="2" class="cell" style="color: blue"
            >{{ x.purdate }}</ion-col
          >
          <ion-col size="2" class="cell">{{ x.supname | slice: 0:24 }}</ion-col>
          <ion-col size="4" class="cell">{{ x.ramname }}</ion-col>
          <ion-col size="1" class="cell" style="color: blue"
            >{{ x.qty }}</ion-col
          >
          <ion-col size="1" class="cell" style="color: blue"
            >{{ x.rate }}</ion-col
          >
          <ion-col size="1" class="cell" style="color: blue"
            >{{ x.purgrandtotal }}</ion-col
          >
        </ion-row>

        <ion-row *ngIf="rmArray?.length === 0">
          <ion-col size="12" class="no-records">Data not found</ion-col>
        </ion-row>
      </div>
    </ion-grid>
  </div>
  <div class="modal-content sm" *ngIf="showEntryCard">
    <div class="modal-header">PO ID : {{currentRecord.purid}}</div>
    <div class="modal-body">
      <form
        [formGroup]="registerForm"
        (ngSubmit)="submitData()"
        *ngIf="showEntryCard"
      >
        <ion-grid>
          <ion-row>
            <ion-col size="12">
              <ion-label><strong>Purchase</strong></ion-label>
              <ion-radio-group
                class="flex-radio-group"
                value="{{isApproved}}"
                (ionChange)="approval($event.detail.value)"
              >
                <ion-radio value="1"></ion-radio>
                <ion-label>Approved</ion-label>
                <ion-radio value="0"></ion-radio>
                <ion-label>Rejected</ion-label>
              </ion-radio-group>
            </ion-col>
            <ion-col size="12">
              <ion-textarea
                formControlName="remarks"
                placeholder="Remarks"
                fill="outline"
              ></ion-textarea>
            </ion-col>
          </ion-row>
        </ion-grid>
      </form>
    </div>
    <div class="modal-footer">
      <ion-button color="success" type="submit" [disabled]="!registerForm.valid"
        >Submit</ion-button
      >

      <ion-button color="danger" (click)="modaldismiss()">Cancel</ion-button>
    </div>
  </div>
  <form
    [formGroup]="registerForm"
    (ngSubmit)="submitData()"
    *ngIf="showEntryCard"
  ></form>
</ion-content>
